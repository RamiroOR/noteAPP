{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import DatePicker from'react-datepicker';import'react-datepicker/dist/react-datepicker.css';import{useParams,useNavigate}from'react-router-dom';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export default function CreateNote(){const[users,setUsers]=useState([]);const[userSelected,setUserSelected]=useState('');const[title,setTitle]=useState('');const[content,setContent]=useState('');const[date,setDate]=useState(new Date());const[isEditing,setIsEditing]=useState(false);const[noteId,setNoteId]=useState('');const[alert,setAlert]=useState({show:false,message:'',type:''});const{id}=useParams();const navigate=useNavigate();useEffect(()=>{const fetchData=async()=>{try{const res=await axios.get('http://localhost:4000/api/users');if(res.data.length>0){setUsers(res.data);setUserSelected(res.data[0].username);}else{setAlert({show:true,message:'No users available. Please create a user first.',type:'danger'});setUserSelected('');// Ensure no user is selected if none are available\n}if(id&&res.data.length>0){const noteRes=await axios.get(\"http://localhost:4000/api/notes/\".concat(id));setTitle(noteRes.data.title);setContent(noteRes.data.content);setDate(new Date(noteRes.data.date));setUserSelected(noteRes.data.author);setIsEditing(true);setNoteId(id);}}catch(error){console.error(\"Failed to fetch data\",error);setAlert({show:true,message:'Failed to load data!',type:'danger'});}};fetchData();},[id]);const onSubmit=async e=>{e.preventDefault();if(!title.trim()||!content.trim()){setAlert({show:true,message:'Please fill in all fields.',type:'danger'});return;}const newNote={title,content,date,author:userSelected};try{if(isEditing){await axios.put(\"http://localhost:4000/api/notes/\".concat(noteId),newNote);}else{await axios.post('http://localhost:4000/api/notes',newNote);}setAlert({show:true,message:'Note saved successfully!',type:'success'});setTimeout(()=>{navigate('/');},2000);// Redirect after 2 seconds\n}catch(error){console.error(\"Failed to save the note\",error);setAlert({show:true,message:'Failed to save the note!',type:'danger'});}};return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 offset-md-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card card-body\",children:[/*#__PURE__*/_jsx(\"h4\",{children:isEditing?'Edit Note':'Create Note'}),alert.show&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-\".concat(alert.type),role:\"alert\",children:alert.message}),users.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"select\",{className:\"form-control\",onChange:e=>setUserSelected(e.target.value),value:userSelected,children:users.map(user=>/*#__PURE__*/_jsx(\"option\",{value:user.username,children:user.username},user._id))})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Title\",onChange:e=>setTitle(e.target.value),required:true,value:title})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",placeholder:\"Content\",onChange:e=>setContent(e.target.value),required:true,value:content})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(DatePicker,{className:\"form-control\",selected:date,onChange:setDate})}),/*#__PURE__*/_jsx(\"button\",{onClick:onSubmit,className:\"btn btn-primary\",disabled:!userSelected,children:\"Save\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-warning\",role:\"alert\",children:\"No users available to assign the note. Please create a user first.\"})]})});}","map":{"version":3,"names":["React","useState","useEffect","axios","DatePicker","useParams","useNavigate","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","CreateNote","users","setUsers","userSelected","setUserSelected","title","setTitle","content","setContent","date","setDate","Date","isEditing","setIsEditing","noteId","setNoteId","alert","setAlert","show","message","type","id","navigate","fetchData","res","get","data","length","username","noteRes","concat","author","error","console","onSubmit","e","preventDefault","trim","newNote","put","post","setTimeout","className","children","role","onChange","target","value","map","user","_id","placeholder","required","selected","onClick","disabled"],"sources":["D:/mern-stack/frontend/src/components/CreateNote.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport DatePicker from 'react-datepicker';\r\nimport 'react-datepicker/dist/react-datepicker.css';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\n\r\nexport default function CreateNote() {\r\n    const [users, setUsers] = useState([]);\r\n    const [userSelected, setUserSelected] = useState('');\r\n    const [title, setTitle] = useState('');\r\n    const [content, setContent] = useState('');\r\n    const [date, setDate] = useState(new Date());\r\n    const [isEditing, setIsEditing] = useState(false);\r\n    const [noteId, setNoteId] = useState('');\r\n    const [alert, setAlert] = useState({ show: false, message: '', type: '' });\r\n\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                const res = await axios.get('http://localhost:4000/api/users');\r\n                if (res.data.length > 0) {\r\n                    setUsers(res.data);\r\n                    setUserSelected(res.data[0].username);\r\n                } else {\r\n                    setAlert({ show: true, message: 'No users available. Please create a user first.', type: 'danger' });\r\n                    setUserSelected(''); // Ensure no user is selected if none are available\r\n                }\r\n\r\n                if (id && res.data.length > 0) {\r\n                    const noteRes = await axios.get(`http://localhost:4000/api/notes/${id}`);\r\n                    setTitle(noteRes.data.title);\r\n                    setContent(noteRes.data.content);\r\n                    setDate(new Date(noteRes.data.date));\r\n                    setUserSelected(noteRes.data.author);\r\n                    setIsEditing(true);\r\n                    setNoteId(id);\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Failed to fetch data\", error);\r\n                setAlert({ show: true, message: 'Failed to load data!', type: 'danger' });\r\n            }\r\n        };\r\n\r\n        fetchData();\r\n    }, [id]);\r\n\r\n    const onSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (!title.trim() || !content.trim()) {\r\n            setAlert({ show: true, message: 'Please fill in all fields.', type: 'danger' });\r\n            return;\r\n        }\r\n\r\n        const newNote = {\r\n            title,\r\n            content,\r\n            date,\r\n            author: userSelected\r\n        };\r\n\r\n        try {\r\n            if (isEditing) {\r\n                await axios.put(`http://localhost:4000/api/notes/${noteId}`, newNote);\r\n            } else {\r\n                await axios.post('http://localhost:4000/api/notes', newNote);\r\n            }\r\n            setAlert({ show: true, message: 'Note saved successfully!', type: 'success' });\r\n            setTimeout(() => {\r\n                navigate('/');\r\n            }, 2000); // Redirect after 2 seconds\r\n        } catch (error) {\r\n            console.error(\"Failed to save the note\", error);\r\n            setAlert({ show: true, message: 'Failed to save the note!', type: 'danger' });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"col-md-6 offset-md-3\">\r\n            <div className=\"card card-body\">\r\n                <h4>{isEditing ? 'Edit Note' : 'Create Note'}</h4>\r\n                {alert.show && (\r\n                    <div className={`alert alert-${alert.type}`} role=\"alert\">\r\n                        {alert.message}\r\n                    </div>\r\n                )}\r\n                {users.length > 0 ? (\r\n                  <>\r\n                    <div className=\"form-group\">\r\n                        <select \r\n                            className=\"form-control\"\r\n                            onChange={e => setUserSelected(e.target.value)}\r\n                            value={userSelected}\r\n                        >\r\n                            {users.map(user => \r\n                                <option key={user._id} value={user.username}>\r\n                                    {user.username}\r\n                                </option>\r\n                            )}\r\n                        </select>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <input \r\n                            type=\"text\" \r\n                            className=\"form-control\" \r\n                            placeholder=\"Title\" \r\n                            onChange={e => setTitle(e.target.value)}\r\n                            required\r\n                            value={title} \r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <textarea \r\n                            className=\"form-control\"\r\n                            placeholder=\"Content\"\r\n                            onChange={e => setContent(e.target.value)}\r\n                            required\r\n                            value={content}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <DatePicker \r\n                            className=\"form-control\" \r\n                            selected={date}\r\n                            onChange={setDate}\r\n                        />\r\n                    </div>\r\n\r\n                    <button onClick={onSubmit} className=\"btn btn-primary\" disabled={!userSelected}>\r\n                        Save\r\n                    </button>\r\n                  </>\r\n                ) : (\r\n                  <div className=\"alert alert-warning\" role=\"alert\">\r\n                    No users available to assign the note. Please create a user first.\r\n                  </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}