{"ast":null,"code":"import React,{Component}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default class CreateUser extends Component{constructor(){super(...arguments);this.state={users:[],username:'',error:'',successMessage:'',isModalOpen:false,userToDelete:null};this.getUsers=async()=>{const res=await axios.get('http://localhost:4000/api/users');this.setState({users:res.data});};this.onChangeUsername=e=>{this.setState({username:e.target.value,error:'',successMessage:''});};this.onSubmit=async e=>{e.preventDefault();const{username}=this.state;if(!username){this.setState({error:'Please enter a username.'});return;}if(username.length<3){this.setState({error:'Username must be at least 3 characters long.'});return;}const userExists=this.state.users.some(user=>user.username===username);if(userExists){this.setState({error:'Username already exists.'});return;}try{await axios.post('http://localhost:4000/api/users',{username});this.setState({username:'',successMessage:'User created successfully!',error:''});this.getUsers();}catch(error){this.setState({error:'Failed to create user.',successMessage:''});}};this.openModal=userId=>{this.setState({isModalOpen:true,userToDelete:userId});};this.closeModal=()=>{this.setState({isModalOpen:false,userToDelete:null});};this.deleteUser=async()=>{const{userToDelete}=this.state;await axios.delete(\"http://localhost:4000/api/users/\".concat(userToDelete));this.getUsers();this.closeModal();};}async componentDidMount(){this.getUsers();}render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card card-body\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Create New User\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.onSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:this.state.username,onChange:this.onChangeUsername}),this.state.error&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red'},children:this.state.error}),this.state.successMessage&&/*#__PURE__*/_jsx(\"div\",{style:{color:'green'},children:this.state.successMessage})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Save\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-8\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"list-group\",children:this.state.users.map(user=>/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item list-group-item-action\",children:[user.username,/*#__PURE__*/_jsx(\"button\",{onClick:()=>this.openModal(user._id),className:\"btn btn-danger btn-sm\",style:{float:'right'},children:\"Delete\"})]},user._id))})}),this.state.isModalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"modal show\",tabIndex:\"-1\",role:\"dialog\",style:{display:'block'},children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog\",role:\"document\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"modal-title\",children:\"Confirm Deletion\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"close\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\",onClick:this.closeModal,children:/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",children:\"\\xD7\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Are you sure you want to delete this user?\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:this.closeModal,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-danger\",onClick:this.deleteUser,children:\"Delete\"})]})]})})})]});}}","map":{"version":3,"names":["React","Component","axios","jsx","_jsx","jsxs","_jsxs","CreateUser","constructor","arguments","state","users","username","error","successMessage","isModalOpen","userToDelete","getUsers","res","get","setState","data","onChangeUsername","e","target","value","onSubmit","preventDefault","length","userExists","some","user","post","openModal","userId","closeModal","deleteUser","delete","concat","componentDidMount","render","className","children","type","onChange","style","color","map","onClick","_id","float","tabIndex","role","display"],"sources":["D:/mern-stack/frontend/src/components/CreateUser.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\n\r\nexport default class CreateUser extends Component {\r\n    state = {\r\n        users: [],\r\n        username: '',\r\n        error: '',\r\n        successMessage: '',\r\n        isModalOpen: false,\r\n        userToDelete: null\r\n    }\r\n\r\n    async componentDidMount() {\r\n        this.getUsers();\r\n    }\r\n\r\n    getUsers = async () => {\r\n        const res = await axios.get('http://localhost:4000/api/users');\r\n        this.setState({ users: res.data });\r\n    }\r\n\r\n    onChangeUsername = (e) => {\r\n        this.setState({\r\n            username: e.target.value,\r\n            error: '',\r\n            successMessage: ''\r\n        });\r\n    }\r\n\r\n    onSubmit = async e => {\r\n        e.preventDefault();\r\n        const { username } = this.state;\r\n\r\n        if (!username) {\r\n            this.setState({ error: 'Please enter a username.' });\r\n            return;\r\n        }\r\n        if (username.length < 3) {\r\n            this.setState({ error: 'Username must be at least 3 characters long.' });\r\n            return;\r\n        }\r\n\r\n        const userExists = this.state.users.some(user => user.username === username);\r\n        if (userExists) {\r\n            this.setState({ error: 'Username already exists.' });\r\n            return;\r\n        }\r\n\r\n        try {\r\n            await axios.post('http://localhost:4000/api/users', { username });\r\n            this.setState({\r\n                username: '',\r\n                successMessage: 'User created successfully!',\r\n                error: ''\r\n            });\r\n            this.getUsers();\r\n        } catch (error) {\r\n            this.setState({\r\n                error: 'Failed to create user.',\r\n                successMessage: ''\r\n            });\r\n        }\r\n    }\r\n\r\n    openModal = (userId) => {\r\n        this.setState({\r\n            isModalOpen: true,\r\n            userToDelete: userId\r\n        });\r\n    }\r\n\r\n    closeModal = () => {\r\n        this.setState({\r\n            isModalOpen: false,\r\n            userToDelete: null\r\n        });\r\n    }\r\n\r\n    deleteUser = async () => {\r\n        const { userToDelete } = this.state;\r\n        await axios.delete(`http://localhost:4000/api/users/${userToDelete}`);\r\n        this.getUsers();\r\n        this.closeModal();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"row\">\r\n                <div className=\"col-md-4\">\r\n                    <div className=\"card card-body\">\r\n                        <h3>Create New User</h3>\r\n                        <form onSubmit={this.onSubmit}>\r\n                            <div className=\"form-group\">\r\n                                <input\r\n                                    type=\"text\"\r\n                                    className=\"form-control\"\r\n                                    value={this.state.username}\r\n                                    onChange={this.onChangeUsername}\r\n                                />\r\n                                {this.state.error && <div style={{ color: 'red' }}>{this.state.error}</div>}\r\n                                {this.state.successMessage && <div style={{ color: 'green' }}>{this.state.successMessage}</div>}\r\n                            </div>\r\n                            <button type=\"submit\" className=\"btn btn-primary\">\r\n                                Save\r\n                            </button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n                <div className=\"col-md-8\">\r\n                    <ul className=\"list-group\">\r\n                        {this.state.users.map(user => (\r\n                            <li className=\"list-group-item list-group-item-action\" key={user._id}>\r\n                                {user.username}\r\n                                <button onClick={() => this.openModal(user._id)} className=\"btn btn-danger btn-sm\" style={{ float: 'right' }}>\r\n                                    Delete\r\n                                </button>\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                </div>\r\n                {this.state.isModalOpen && (\r\n                    <div className=\"modal show\" tabIndex=\"-1\" role=\"dialog\" style={{ display: 'block' }}>\r\n                        <div className=\"modal-dialog\" role=\"document\">\r\n                            <div className=\"modal-content\">\r\n                                <div className=\"modal-header\">\r\n                                    <h5 className=\"modal-title\">Confirm Deletion</h5>\r\n                                    <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" onClick={this.closeModal}>\r\n                                        <span aria-hidden=\"true\">&times;</span>\r\n                                    </button>\r\n                                </div>\r\n                                <div className=\"modal-body\">\r\n                                    <p>Are you sure you want to delete this user?</p>\r\n                                </div>\r\n                                <div className=\"modal-footer\">\r\n                                    <button type=\"button\" className=\"btn btn-secondary\" onClick={this.closeModal}>Cancel</button>\r\n                                    <button type=\"button\" className=\"btn btn-danger\" onClick={this.deleteUser}>Delete</button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}