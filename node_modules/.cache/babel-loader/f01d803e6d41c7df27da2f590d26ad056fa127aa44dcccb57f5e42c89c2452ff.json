{"ast":null,"code":"import React,{Component}from'react';import axios from'axios';import{format}from'timeago.js';import{Link}from'react-router-dom';import ConfirmationModal from'./ConfirmationModal';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default class NotesList extends Component{constructor(){super(...arguments);this.state={notes:[],isLoading:true,error:null,modalOpen:false,noteToDelete:null};this.openDeleteModal=noteId=>{this.setState({modalOpen:true,noteToDelete:noteId});};this.closeModal=()=>{this.setState({modalOpen:false,noteToDelete:null});};this.deleteNote=async()=>{const{noteToDelete}=this.state;try{await axios.delete(\"http://localhost:4000/api/notes/\".concat(noteToDelete));this.getNotes();}catch(error){console.error('Failed to delete the note');}this.closeModal();};}componentDidMount(){this.getNotes();}async getNotes(){try{const res=await axios.get('http://localhost:4000/api/notes');this.setState({notes:res.data,isLoading:false});}catch(error){this.setState({error:'Failed to load notes',isLoading:false});}}render(){const{isLoading,error,notes,modalOpen}=this.state;if(isLoading){return/*#__PURE__*/_jsx(\"p\",{children:\"Loading notes...\"});}if(error){return/*#__PURE__*/_jsx(\"p\",{children:error});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:notes.map(note=>/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"h5\",{children:note.title}),/*#__PURE__*/_jsx(Link,{className:\"btn btn-secondary\",to:\"/edit/\".concat(note._id),children:\"Edit\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"p\",{children:note.content}),/*#__PURE__*/_jsx(\"p\",{children:note.author}),/*#__PURE__*/_jsx(\"p\",{children:format(note.date)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-footer\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:()=>this.openDeleteModal(note._id),children:\"Delete\"})})]})},note._id))}),/*#__PURE__*/_jsx(ConfirmationModal,{isOpen:modalOpen,title:\"Delete Note\",body:\"Are you sure you want to delete this note?\",onConfirm:this.deleteNote,onCancel:this.closeModal})]});}}","map":{"version":3,"names":["React","Component","axios","format","Link","ConfirmationModal","jsx","_jsx","jsxs","_jsxs","NotesList","constructor","arguments","state","notes","isLoading","error","modalOpen","noteToDelete","openDeleteModal","noteId","setState","closeModal","deleteNote","delete","concat","getNotes","console","componentDidMount","res","get","data","render","children","className","map","note","title","to","_id","content","author","date","onClick","isOpen","body","onConfirm","onCancel"],"sources":["D:/mern-stack/frontend/src/components/NotesList.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport { format } from 'timeago.js';\r\nimport { Link } from 'react-router-dom';\r\nimport ConfirmationModal from './ConfirmationModal';\r\n\r\nexport default class NotesList extends Component {\r\n    state = {\r\n        notes: [],\r\n        isLoading: true,\r\n        error: null,\r\n        modalOpen: false,\r\n        noteToDelete: null\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getNotes()\r\n    }\r\n\r\n    async getNotes() {\r\n        try {\r\n            const res = await axios.get('http://localhost:4000/api/notes')\r\n            this.setState({ notes: res.data, isLoading: false })\r\n        } catch (error) {\r\n            this.setState({ error: 'Failed to load notes', isLoading: false })\r\n        }\r\n    }\r\n\r\n    openDeleteModal = (noteId) => {\r\n        this.setState({ modalOpen: true, noteToDelete: noteId });\r\n    }\r\n\r\n    closeModal = () => {\r\n        this.setState({ modalOpen: false, noteToDelete: null });\r\n    }\r\n\r\n    deleteNote = async () => {\r\n        const { noteToDelete } = this.state;\r\n        try {\r\n            await axios.delete(`http://localhost:4000/api/notes/${noteToDelete}`);\r\n            this.getNotes();\r\n        } catch (error) {\r\n            console.error('Failed to delete the note');\r\n        }\r\n        this.closeModal();\r\n    }\r\n\r\n    render() {\r\n        const { isLoading, error, notes, modalOpen } = this.state;\r\n\r\n        if (isLoading) {\r\n            return <p>Loading notes...</p>\r\n        }\r\n\r\n        if (error) {\r\n            return <p>{error}</p>\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <div className=\"row\">\r\n                    {notes.map(note => (\r\n                        <div className=\"col-md-4 p-2\" key={note._id}>\r\n                            <div className=\"card\">\r\n                                <div className=\"card-header d-flex justify-content-between\">\r\n                                    <h5>{note.title}</h5>\r\n                                    <Link className=\"btn btn-secondary\" to={`/edit/${note._id}`}>\r\n                                        Edit\r\n                                    </Link>\r\n                                </div>\r\n                                <div className=\"card-body\">\r\n                                    <p>{note.content}</p>\r\n                                    <p>{note.author}</p>\r\n                                    <p>{format(note.date)}</p>\r\n                                </div>\r\n                                <div className=\"card-footer\">\r\n                                    <button\r\n                                        className=\"btn btn-danger\"\r\n                                        onClick={() => this.openDeleteModal(note._id)}\r\n                                    >\r\n                                        Delete\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n                <ConfirmationModal\r\n                    isOpen={modalOpen}\r\n                    title=\"Delete Note\"\r\n                    body=\"Are you sure you want to delete this note?\"\r\n                    onConfirm={this.deleteNote}\r\n                    onCancel={this.closeModal}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}